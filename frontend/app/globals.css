@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;900&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  * {
    @apply border-swiss-border;
  }

  body {
    @apply font-sans bg-swiss-white text-swiss-black antialiased;
  }

  .dark body,
  :is(.dark) body {
    @apply bg-[#0a0a0a] text-white;
  }

  h1, h2, h3, h4, h5, h6 {
    @apply uppercase font-black tracking-tighter;
  }
}

@layer utilities {
  /* Swiss Grid Pattern - 24x24px grid lines */
  .swiss-grid-pattern {
    background-image:
      linear-gradient(to right, rgba(0, 0, 0, 0.03) 1px, transparent 1px),
      linear-gradient(to bottom, rgba(0, 0, 0, 0.03) 1px, transparent 1px);
    background-size: 24px 24px;
  }

  /* Swiss Dot Matrix - 16x16px dots */
  .swiss-dots {
    background-image: radial-gradient(circle, rgba(0, 0, 0, 0.04) 1px, transparent 1px);
    background-size: 16px 16px;
  }

  /* Swiss Diagonal Lines - 45deg stripes */
  .swiss-diagonal {
    background-image: repeating-linear-gradient(
      45deg,
      transparent,
      transparent 10px,
      rgba(0, 0, 0, 0.02) 10px,
      rgba(0, 0, 0, 0.02) 11px
    );
  }

  /* Swiss Noise Texture */
  .swiss-noise {
    position: relative;
  }

  .swiss-noise::before {
    content: '';
    position: absolute;
    inset: 0;
    opacity: 0.015;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
    pointer-events: none;
    z-index: 1;
  }

  /* Navigation Link Animation */
  .nav-link {
    @apply relative overflow-hidden inline-block;
  }

  .nav-link-text {
    @apply block transition-transform duration-200 ease-out;
  }

  .nav-link:hover .nav-link-text {
    @apply -translate-y-full;
  }

  .nav-link-accent {
    @apply absolute inset-0 flex items-center justify-center translate-y-full transition-transform duration-200 ease-out text-swiss-accent;
  }

  .nav-link:hover .nav-link-accent {
    @apply translate-y-0;
  }

  /* Swiss Button Base */
  .swiss-btn {
    @apply rounded-none border-4 border-swiss-black uppercase font-bold tracking-widest
           transition-all duration-150 ease-linear px-8 py-4 text-sm;
  }

  .swiss-btn-primary {
    @apply swiss-btn bg-swiss-black text-swiss-white hover:bg-swiss-accent hover:border-swiss-accent;
  }

  :is(.dark) .swiss-btn-primary {
    @apply bg-white text-black border-white hover:bg-swiss-accent hover:border-swiss-accent hover:text-white;
  }

  .swiss-btn-secondary {
    @apply swiss-btn bg-swiss-white text-swiss-black hover:bg-swiss-black hover:text-swiss-white;
  }

  :is(.dark) .swiss-btn-secondary {
    @apply bg-[#111] text-white border-white/20 hover:bg-white hover:text-black;
  }

  /* Swiss Card */
  .swiss-card {
    @apply border-4 border-swiss-black bg-swiss-white p-4 sm:p-8 transition-all duration-200 ease-out;
  }

  :is(.dark) .swiss-card {
    @apply border-white/15 bg-[#111] text-white;
  }

  .swiss-card-hover {
    @apply swiss-card hover:bg-swiss-accent hover:text-swiss-white hover:-translate-y-1;
  }

  /* Focus States */
  .swiss-focus {
    @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-swiss-accent focus-visible:ring-offset-2;
  }

  /* Dark card */
  .swiss-card-dark {
    @apply border-4 border-swiss-black bg-swiss-black text-swiss-white p-4 sm:p-8 transition-all duration-200;
  }

  :is(.dark) .swiss-card-dark {
    @apply border-white/15 bg-[#1a1a1a];
  }

  /* Constraint status rows */
  .constraint-row {
    @apply flex items-center gap-4 p-4 border-l-4;
  }
  .constraint-row-safe {
    @apply constraint-row border-green-500 bg-green-50;
  }
  .constraint-row-warn {
    @apply constraint-row border-amber-500 bg-amber-50;
  }
  .constraint-row-danger {
    @apply constraint-row border-red-500 bg-red-50;
  }

  :is(.dark) .constraint-row-safe { @apply bg-green-500/10; }
  :is(.dark) .constraint-row-warn { @apply bg-amber-500/10; }
  :is(.dark) .constraint-row-danger { @apply bg-red-500/10; }

  /* Global dark-mode override for swiss-muted (near-white #F2F2F2) */
  :is(.dark) .bg-swiss-muted { background-color: rgba(255,255,255,0.08) !important; }
  :is(.dark) .border-swiss-muted { border-color: rgba(255,255,255,0.15) !important; }

  /* Verdict badge */
  .verdict-strong { @apply bg-green-600 text-white px-3 py-1 text-xs font-black uppercase tracking-widest; }
  .verdict-moderate { @apply bg-amber-500 text-white px-3 py-1 text-xs font-black uppercase tracking-widest; }
  .verdict-caution { @apply bg-red-600 text-white px-3 py-1 text-xs font-black uppercase tracking-widest; }
}

/* Leaflet map styles */
.leaflet-container {
  @apply border-4 border-swiss-black;
}

/* Prevent Leaflet panes/controls escaping above sticky navbar */
.leaflet-top,
.leaflet-bottom,
.leaflet-pane {
  z-index: 1 !important;
}

/* Keep popups above tiles but still inside the stacking context */
.leaflet-popup-pane {
  z-index: 7 !important;
}
.leaflet-marker-pane {
  z-index: 6 !important;
}
.leaflet-tooltip-pane {
  z-index: 6 !important;
}

/* ─── Print / PDF styles ─── */
@media print {
  /* Hide interactive chrome */
  header,
  .no-print {
    display: none !important;
  }

  body {
    background: white !important;
    color: black !important;
    font-size: 11pt;
  }

  /* Remove sticky header space */
  main {
    padding-top: 0 !important;
  }

  /* Print title */
  .print-title {
    display: block !important;
  }

  /* Force white backgrounds on cards */
  .swiss-card,
  .swiss-card-dark,
  [class*="swiss-card"] {
    background: white !important;
    color: black !important;
    border: 2px solid black !important;
    box-shadow: none !important;
    break-inside: avoid;
    page-break-inside: avoid;
  }

  /* Row breaks between grid sections */
  .print-page-break {
    page-break-before: always;
    break-before: page;
  }

  /* Avoid cutting cards mid-page */
  .swiss-card {
    margin-bottom: 12pt;
  }

  /* Collapse grid to single column for reliable PDF layout */
  .grid {
    display: block !important;
  }

  /* Ensure map doesn't print as empty white box */
  .leaflet-container {
    display: none !important;
  }

  /* Remove framer-motion invisible states */
  [style*="opacity: 0"] {
    opacity: 1 !important;
  }

  /* Remove animations */
  * {
    animation: none !important;
    transition: none !important;
  }
}
